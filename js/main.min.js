const replaceLink=function(e,t){var o=document.createElement(t);return o.innerHTML=e.innerHTML,Array.prototype.forEach.call(e.attributes,function(e){o.setAttribute(e.name,e.value)}),e.parentNode.insertBefore(o,e),e.parentNode.removeChild(e),o.removeAttribute("href"),o.setAttribute("type","button"),o},buyButtons=document.querySelectorAll(".product-cart__button--buy"),bayPopup=document.querySelector(".popup--cart"),bayClose=bayPopup.querySelector(".popup__close");buyButtons.forEach(function(e,t,o){e.addEventListener("click",function(e){e.preventDefault(),bayPopup.classList.add("popup--show")})}),bayClose.addEventListener("click",function(e){e.preventDefault(),bayPopup.classList.remove("popup--show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&bayPopup.classList.contains("popup--show")&&(e.preventDefault(),bayPopup.classList.remove("popup--show"))});const formPopup=document.querySelector(".popup--form"),popupClose=formPopup.querySelector(".popup__close"),form=formPopup.querySelector(".form"),fieldName=formPopup.querySelector("input[name='name']"),fieldEmail=formPopup.querySelector("input[name='email']"),fieldMessage=formPopup.querySelector("textarea[name='notification']");let formOpenButton=document.querySelector(".contacts__button"),isStorageSupport=!0,storage="";formOpenButton=replaceLink(formOpenButton,"button");try{storage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}formOpenButton.addEventListener("click",function(e){e.preventDefault(),formPopup.classList.add("popup--show"),fieldName.focus(),storage&&(fieldEmail.value=storage)}),popupClose.addEventListener("click",function(e){e.preventDefault(),formPopup.classList.remove("popup--show"),formPopup.classList.remove("popup--error")}),form.addEventListener("submit",function(e){fieldName.classList.remove("field-error"),fieldEmail.classList.remove("field-error"),fieldMessage.classList.remove("field-error"),fieldName.value&&fieldEmail.value&&fieldMessage.value?isStorageSupport&&localStorage.setItem("email",fieldEmail.value):(e.preventDefault(),formPopup.classList.remove("popup--error"),formPopup.offsetWidth=formPopup.offsetWidth,formPopup.classList.add("popup--error"),fieldName.value||fieldName.classList.add("field-error"),fieldEmail.value||fieldEmail.classList.add("field-error"),fieldMessage.value||fieldMessage.classList.add("field-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&formPopup.classList.contains("popup--show")&&(e.preventDefault(),formPopup.classList.remove("popup--show"),formPopup.classList.remove("popup--error"))});const map=document.querySelector(".contacts__map"),mapPopup=document.querySelector(".popup--map"),mapClose=mapPopup.querySelector(".popup__close");map.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("popup--show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("popup--show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("popup--show")&&(e.preventDefault(),mapPopup.classList.remove("popup--show"))});const prev=document.querySelector(".gallery__button--prev"),next=document.querySelector(".gallery__button--next"),sliderWidth=document.querySelector(".gallery").offsetWidth,sliderList=document.querySelector(".gallery__list"),sliderItems=sliderList.querySelectorAll(".gallery__item");let sliderItemsCount=sliderItems.length-1,position=0;next.addEventListener("click",function(e){if(e.preventDefault(),prev.removeAttribute("disabled"),position<sliderItemsCount){let e=-sliderWidth*++position;sliderList.style.transform="translateX("+e+"px)"}position===sliderItemsCount&&next.setAttribute("disabled","disabled")}),prev.addEventListener("click",function(e){if(e.preventDefault(),next.removeAttribute("disabled"),position>0){let e=-sliderWidth*--position;sliderList.style.transform="translateX("+e+"px"}0===position&&prev.setAttribute("disabled","disabled")});const tabButtons=document.querySelectorAll(".tabs__button"),tabItems=document.querySelectorAll(".tabs__item"),tabImages=document.querySelectorAll(".tabs__image");let clearActive=function(e,t){e.forEach(function(e,o,s){e.classList.remove(t)})};tabButtons.forEach(function(e,t,o){e.addEventListener("click",function(o){o.preventDefault(),e.classList.contains(".tabs__button--active")||(clearActive(tabButtons,"tabs__button--active"),clearActive(tabItems,"tabs__item--active"),clearActive(tabImages,"tabs__image--active"),e.classList.add("tabs__button--active"),tabItems[t].classList.add("tabs__item--active"),tabImages[t].classList.add("tabs__image--active"))})});
